<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lifeless Chasm Records</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="page-body">

  <header class="header">
    <img src="logo.png" alt="Lifeless Chasm Records" class="logo" />
    <p class="tagline">
      Death and grind label from London, UK. Limited merch runs and curated distro.
    </p>
    <div class="divider"></div>
  </header>

  <main class="main-content">
    <!-- SECTION 1: Links -->
    <section class="links-section">
      <div class="links">
        <a href="https://open.spotify.com/playlist/2S8VvIN52Cx60xkJ2Vn1gi" class="btn">Spotify</a>
        <a href="https://lifelesschasm.shop/" class="btn">Shop</a>
        <a href="https://www.abyssaladornments.com" class="btn">Chains</a>
        <a href="https://www.instagram.com/lifelesschasmrecords/" class="btn">Instagram</a>
        <a href="https://lifelesschasm.bandcamp.com/music" class="btn">Bandcamp</a>
        <a href="https://www.youtube.com/@lifelesschasmrecords" class="btn">YouTube</a>
      </div>
    </section>

    <!-- SECTION 2: Spotify + Album Selector -->
    <section class="out-now-section">
      <div class="player-wrap">
  <iframe 
    class="spotify-embed active"
    src="https://open.spotify.com/embed/album/1rPMzfwjEe1U5y4m2yS6RM"
    height="352"
    frameborder="0"
    allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
    loading="lazy"></iframe>

  <iframe 
    class="spotify-embed buffer"
    height="352"
    frameborder="0"
    allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
    aria-hidden="true"></iframe>
</div>

      <!-- Thumbs (placeholder image + same embed for now).
           Replace each data-embed with real album embed URLs later. -->
      <div class="album-scroll">
        <img src="https://f4.bcbits.com/img/a1941112033_10.jpg" class="album-thumb active" alt="Album 1"
             data-embed="https://open.spotify.com/embed/album/1rPMzfwjEe1U5y4m2yS6RM?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a3099047217_10.jpg" class="album-thumb" alt="Album 2"
             data-embed="https://open.spotify.com/embed/album/04up0mB7jaRoJjeVJ6aVFe?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a0926201714_10.jpg" class="album-thumb" alt="Album 3"
             data-embed="https://open.spotify.com/embed/album/7Mx8EZ0mAjH3qkDq9wpBjk?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a2873414988_10.jpg" class="album-thumb" alt="Album 4"
             data-embed="https://open.spotify.com/embed/album/4TX5Rnhq4Y5HBGiFop0nF8?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a3146167911_10.jpg" class="album-thumb" alt="Album 5"
             data-embed="https://open.spotify.com/embed/album/5Yu3WnJCEbMuMja5mzlECm?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a4238288575_10.jpg" class="album-thumb" alt="Album 6"
             data-embed="https://open.spotify.com/embed/album/2OAUVPHM5Yo6hPRUQ6luXV?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a2527835941_10.jpg" class="album-thumb" alt="Album 7"
             data-embed="https://open.spotify.com/embed/album/2o0k4cLkVKvRtF5U0FnHuh?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a3107737857_10.jpg" class="album-thumb" alt="Album 8"
             data-embed="https://open.spotify.com/embed/album/71WLDSHOBFplaqYMXpKN7L?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a2649628343_10.jpg" class="album-thumb" alt="Album 9"
             data-embed="https://open.spotify.com/embed/album/21ZPOciZUs4rLXNKp4UgHi?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a1951790843_10.jpg" class="album-thumb" alt="Album 10"
             data-embed="https://open.spotify.com/embed/album/5b9K9LOCBtLEDWA6cy3aC0?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a2851019202_10.jpg" class="album-thumb" alt="Album 11"
             data-embed="https://open.spotify.com/embed/album/4hxMBrwQ2NfR3guGLZehVx?utm_source=generator" />
        <img src="kuvotus-unisol-thumb.jpg" class="album-thumb" alt="Album 12"
             data-embed="https://open.spotify.com/embed/album/23jAH5T2IvJqsveCkS3fqq?utm_source=generator" />
        <img src="tunkio-unisol-thumb.jpg" class="album-thumb" alt="Album 13"
             data-embed="https://open.spotify.com/embed/album/6Ye9YfEQX6epCCjF912vWC?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a3033947065_10.jpg" class="album-thumb" alt="Album 14"
             data-embed="https://open.spotify.com/embed/album/6FeSWWq02TlV5OrBRkXAVO?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a0038734818_10.jpg" class="album-thumb" alt="Album 15"
             data-embed="https://open.spotify.com/embed/album/7A0tHCfyL76SaA2NhVK84j?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a1309063621_10.jpg" class="album-thumb" alt="Album 16"
             data-embed="https://open.spotify.com/embed/album/1OvNsoKCasdmKmgGjrf6q7?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a3043879441_10.jpg" class="album-thumb" alt="Album 17"
             data-embed="https://open.spotify.com/embed/album/3Pi9SmD8oeW75p6qkvbOzL?utm_source=generator" />
      </div>
    </section>
  </main>

  <!-- SECTION 3: CTA -->
  <div class="cta-bar">
    <a href="http://eepurl.com/hjynl5" class="cta-button">Join Newsletter</a>
  </div>

  <!-- Tiny JS: handle active state + (optional) swap embed -->
<script>
document.addEventListener('DOMContentLoaded', () => {
  const wrap   = document.querySelector('.player-wrap');
  const thumbs = document.querySelectorAll('.album-thumb');

  const front  = () => wrap.querySelector('.spotify-embed.active');
  const buffer = () => wrap.querySelector('.spotify-embed.buffer');

  let animating = false;

  function swapTo(src) {
    if (animating) return;

    const f = front();
    const b = buffer();

    if (!src || f.src === src) return;

    animating = true;
    b.src = src;

    const onLoad = () => {
      b.removeEventListener('load', onLoad);

      // Ensure the browser lays out the buffer before we start the fade
      // (prevents a one-frame flash on some machines)
      b.offsetHeight; // force reflow

      // Crossfade
      b.classList.add('active');
      f.classList.remove('active');

      // After the CSS transition, swap roles and unlock
      const onTransitionEnd = () => {
        b.removeEventListener('transitionend', onTransitionEnd);
        f.classList.add('buffer');
        b.classList.remove('buffer');
        animating = false;
      };
      b.addEventListener('transitionend', onTransitionEnd);
    };

    b.addEventListener('load', onLoad, { once: true });
  }

  thumbs.forEach((t) => {
    t.addEventListener('click', () => {
      document.querySelector('.album-thumb.active')?.classList.remove('active');
      t.classList.add('active');
      swapTo(t.dataset.embed);
    });
  });
});
</script>
</body>
</html>
