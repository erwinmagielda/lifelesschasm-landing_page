<!DOCTYPE html>
<html lang="en">
<head>
  <!-- meta + title -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lifeless Chasm Records</title>

  <!-- favicon + styles -->
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="page-body">

  <!-- header: logo + short tagline -->
  <header class="header">
    <!-- branding mark on top; responsive sizing handled in css -->
    <img src="logo.png" alt="Lifeless Chasm Records" class="logo" />
    <!-- short descriptive line under logo -->
    <p class="tagline">
      Death and grind label from London, UK. Limited merch runs and curated distro.
    </p>
    <!-- thin accent divider for visual separation -->
    <div class="divider"></div>
  </header>

  <!-- main area: two columns on md+, stacked on mobile -->
  <main class="main-content">
    <!-- primary links block -->
    <nav class="links-section" aria-label="primary links">
      <!-- vertical stack of rounded buttons -->
      <div class="links">
        <a href="https://open.spotify.com/playlist/2S8VvIN52Cx60xkJ2Vn1gi" class="btn">Spotify</a>
        <a href="https://lifelesschasm.shop/" class="btn">Shop</a>
        <a href="https://www.abyssaladornments.com" class="btn">Chains</a>
        <a href="https://www.instagram.com/lifelesschasmrecords/" class="btn">Instagram</a>
        <a href="https://lifelesschasm.bandcamp.com/music" class="btn">Bandcamp</a>
        <a href="https://www.youtube.com/@lifelesschasmrecords" class="btn">YouTube</a>
      </div>
    </nav>

    <!-- player + album selector -->
    <section class="out-now-section" aria-label="album player and selector">
      <!-- two iframes used to crossfade:
           .active = visible/playing
           .buffer = preloads next, fades in on swap
           old iframe unloaded after fade to stop audio -->
      <div class="player-wrap">
        <iframe 
          class="spotify-embed active"
          src="https://open.spotify.com/embed/album/1rPMzfwjEe1U5y4m2yS6RM"
          height="352"
          frameborder="0"
          allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
          loading="lazy"></iframe>

        <!-- idle until first swap -->
        <iframe 
          class="spotify-embed buffer"
          height="352"
          frameborder="0"
          allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
          aria-hidden="true"></iframe>
      </div>

      <!-- horizontal album strip; clicking a thumb swaps the embed -->
      <div class="album-scroll" aria-label="album selector">
        <!-- data-embed holds the spotify album url -->
        <img src="https://f4.bcbits.com/img/a1941112033_10.jpg" class="album-thumb active" alt="Enter The Void"
             data-embed="https://open.spotify.com/embed/album/1rPMzfwjEe1U5y4m2yS6RM?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a3099047217_10.jpg" class="album-thumb" alt="2"
             data-embed="https://open.spotify.com/embed/album/04up0mB7jaRoJjeVJ6aVFe?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a0926201714_10.jpg" class="album-thumb" alt="Broken Human Kingdom"
             data-embed="https://open.spotify.com/embed/album/7Mx8EZ0mAjH3qkDq9wpBjk?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a2873414988_10.jpg" class="album-thumb" alt="Aphelion Entity"
             data-embed="https://open.spotify.com/embed/album/4TX5Rnhq4Y5HBGiFop0nF8?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a3146167911_10.jpg" class="album-thumb" alt="Psychic Incarceration"
             data-embed="https://open.spotify.com/embed/album/5Yu3WnJCEbMuMja5mzlECm?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a4238288575_10.jpg" class="album-thumb" alt="Entrail Asphyxiation"
             data-embed="https://open.spotify.com/embed/album/2OAUVPHM5Yo6hPRUQ6luXV?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a2527835941_10.jpg" class="album-thumb" alt="Twisted Forms"
             data-embed="https://open.spotify.com/embed/album/2o0k4cLkVKvRtF5U0FnHuh?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a3107737857_10.jpg" class="album-thumb" alt="Depraved Ingestion Of Cranial Discharge"
             data-embed="https://open.spotify.com/embed/album/71WLDSHOBFplaqYMXpKN7L?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a2649628343_10.jpg" class="album-thumb" alt="Item 9"
             data-embed="https://open.spotify.com/embed/album/21ZPOciZUs4rLXNKp4UgHi?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a1951790843_10.jpg" class="album-thumb" alt="Demo 2021"
             data-embed="https://open.spotify.com/embed/album/5b9K9LOCBtLEDWA6cy3aC0?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a2851019202_10.jpg" class="album-thumb" alt="Webdriver Torso"
             data-embed="https://open.spotify.com/embed/album/4hxMBrwQ2NfR3guGLZehVx?utm_source=generator" />
        <img src="kuvotus-unisol-thumb.jpg" class="album-thumb" alt="Unisolmuirvistys (Kuvotus)"
             data-embed="https://open.spotify.com/embed/album/23jAH5T2IvJqsveCkS3fqq?utm_source=generator" />
        <img src="tunkio-unisol-thumb.jpg" class="album-thumb" alt="Unisolmuirvistys (Tunkio)"
             data-embed="https://open.spotify.com/embed/album/6Ye9YfEQX6epCCjF912vWC?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a3033947065_10.jpg" class="album-thumb" alt="Chloroma"
             data-embed="https://open.spotify.com/embed/album/6FeSWWq02TlV5OrBRkXAVO?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a0038734818_10.jpg" class="album-thumb" alt="The Innards Of A Charred Cadaver"
             data-embed="https://open.spotify.com/embed/album/7A0tHCfyL76SaA2NhVK84j?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a1309063621_10.jpg" class="album-thumb" alt="Analytic Session"
             data-embed="https://open.spotify.com/embed/album/1OvNsoKCasdmKmgGjrf6q7?utm_source=generator" />
        <img src="https://f4.bcbits.com/img/a3043879441_10.jpg" class="album-thumb" alt="Apathy"
             data-embed="https://open.spotify.com/embed/album/3Pi9SmD8oeW75p6qkvbOzL?utm_source=generator" />
      </div>
    </section>
  </main>

  <!-- cta bar: newsletter link in accent strip -->
  <div class="cta-bar">
    <a href="http://eepurl.com/hjynl5" class="cta-button">Join Newsletter</a>
  </div>

  <!-- footer: transparent background + centered text -->
  <footer class="site-footer" role="contentinfo">
    <div class="footer-inner">
      <small>Built by Erwin Magielda © 2025 — All Rights Reserved</small>
    </div>
  </footer>

  <!-- js: crossfade player + single-embed enforcement -->
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    /* caching wrapper + thumbs for quick access */
    const wrap   = document.querySelector('.player-wrap');
    const thumbs = document.querySelectorAll('.album-thumb');

    /* helpers to reference current/front and hidden/buffer iframes */
    const front  = () => wrap.querySelector('.spotify-embed.active');
    const buffer = () => wrap.querySelector('.spotify-embed.buffer');

    /* guard to avoid overlapping transitions */
    let animating = false;

    /* crossfading to a new embed; old src blanked to stop audio */
    function swapTo(src) {
      if (animating) return;
      const f = front();
      const b = buffer();
      if (!src || f.src === src) return;

      animating = true;
      b.src = src;

      const onLoad = () => {
        b.removeEventListener('load', onLoad);

        /* ensure layout pass before starting fade */
        b.offsetHeight;

        /* fade in buffer, fade out front */
        b.classList.add('active');
        f.classList.remove('active');

        const onTransitionEnd = () => {
          b.removeEventListener('transitionend', onTransitionEnd);

          /* kill audio from old frame */
          f.src = 'about:blank';

          /* swap roles */
          f.classList.add('buffer');
          b.classList.remove('buffer');

          animating = false;
        };
        b.addEventListener('transitionend', onTransitionEnd);
      };

      b.addEventListener('load', onLoad, { once: true });
    }

    /* click + keyboard activation for thumbs */
    thumbs.forEach((t) => {
      t.addEventListener('click', () => {
        document.querySelector('.album-thumb.active')?.classList.remove('active');
        t.classList.add('active');
        swapTo(t.dataset.embed);
      });

      t.tabIndex = 0;
      t.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          t.click();
          e.preventDefault();
        }
      });
    });
  });
  </script>

  <!-- js: lightweight analytics (visit + clicks) -->
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    /* small helper to send form-encoded posts to logger */
    const post = (data) => fetch('log.php', {
      method: 'POST',
      headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
      body: new URLSearchParams(data)
    });

    /* mark visit */
    post({ event: 'visit' });

    /* mark link button clicks */
    document.querySelectorAll('.btn').forEach(btn => {
      btn.addEventListener('click', () => {
        post({ event: 'click', button: btn.textContent.trim() });
      });
    });

    /* mark album selections */
    document.querySelectorAll('.album-thumb').forEach(thumb => {
      thumb.addEventListener('click', () => {
        post({ event: 'click', button: 'album:' + (thumb.alt || 'unknown') });
      });
    });
  });
  </script>
</body>
</html>
